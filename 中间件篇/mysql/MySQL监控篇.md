# MySQL监控篇

[TOC]

### 1. 监控指标

| **指标分类**   | **指标名称** | **指标说明**                     |
| -------------- | ------------ | -------------------------------- |
| **性能类指标** | QPS          | 数据库每秒处理的请求数量         |
|                | TPS          | 数据库每秒处理的事务数量         |
|                | 并发数       | 数据库实例当前并行处理的会话数量 |
|                | 连接数       | 连接到数据库会话的数量           |
|                | 缓存命中率   | 查询命中缓存的比例               |
| **高可用指标** | 可用性       | 数据库是否可以正常对外服务       |
|                | 阻塞         | 当前阻塞的会话数                 |
|                | 慢查询       | 慢查询情况                       |
|                | 主从延迟     | 主从延迟时间                     |
|                | 主从状态     | 主从链路是否正常                 |
|                | 死锁         | 查看死锁信息                     |

### 2. 数据库性能监控列表

| 指标名称                      | 含义                                                         | 取值范围         |
| ----------------------------- | ------------------------------------------------------------ | ---------------- |
| 数据库总连接数                | 该指标用于统计试图连接到MySQL服务器的总连接数。              | ≥0counts         |
| 当前活跃连接数                | 该指标用于统计当前打开的连接的数量。                         | ≥0counts         |
| QPS                           | 该指标用于统计平均每秒SQL语句查询次数，包含存储过程。        | ≥0Executions/s   |
| TPS                           | 该指标用于统计平均每秒事务执行次数，包含提交的和回退的。     | ≥0transactions/s |
| 缓冲池利用率                  | 该指标用于统计InnoDB缓存中脏数据与数据比例。                 | 0～1             |
| 缓冲池命中率                  | 该指标用于统计读命中与读请求数比例。                         | 0～1             |
| 缓冲池脏块率                  | 该指标用于统计使用的页与InnoDB缓存中数据总数比例。           | 0～1             |
| InnoDB读取吞吐量              | 该指标用于统计Innodb平均每秒读字节数。                       | ≥0bytes/s        |
| InnoDB写入吞吐量              | 该指标用于统计Innodb平均每秒写字节数。                       | ≥0bytes/s        |
| InnoDB文件读取频率            | 该指标用于统计Innodb平均每秒从文件中读的次数。               | ≥0counts/s       |
| InnoDB文件写入频率            | 该指标用于统计Innodb平均每秒向文件中写的次数。               | ≥0counts/s       |
| InnoDB日志写请求频率          | 该指标用于统计平均每秒的日志写请求数。                       | ≥0counts/s       |
| InnoDB日志物理写频率          | 该指标用于统计平均每秒向日志文件的物理写次数。               | ≥0counts/s       |
| InnoDB日志fsync()写频率       | 该指标用于统计平均每秒向日志文件完成的fsync()写数量。        | ≥0counts/s       |
| 临时表数量                    | 该指标用于统计MySQL执行语句时在硬盘上自动创建的临时表的数量。 | ≥0tables         |
| Key Buffer利用率              | 该指标用于统计MyISAM Key buffer的利用率。                    | 0～1             |
| Key Buffer写命中率            | 该指标用于统计MyISAM Key buffer写命中率。                    | 0～1             |
| Key Buffer读命中率            | 该指标用于统计MyISAM Key buffer读命中率。                    | 0～1             |
| MyISAM硬盘写入频率            | 该指标用于统计平均每秒向磁盘写入索引的次数。                 | ≥0counts/s       |
| MyISAM硬盘读取频率            | 该指标用于统计平均每秒从磁盘读取索引的次数。                 | ≥0counts/s       |
| MyISAM缓冲池写入频率          | 该指标用于统计平均每秒向缓冲池写入索引的请求次数。           | ≥0counts/s       |
| MyISAM缓冲池读取频率          | 该指标用于统计平均每秒从缓冲池读取索引的请求次数。           | ≥0counts/s       |
| Delete语句执行频率            | 该指标用于统计平均每秒Delete语句执行次数。                   | ≥0Executions/s   |
| Insert语句执行频率            | 该指标用于统计平均每秒Insert语句执行次数。                   | ≥0Executions/s   |
| Insert_Select语句执行频率     | 该指标用于统计平均每秒Insert_Select语句执行次数。            | ≥0Executions/s   |
| Replace语句执行频率           | 该指标用于统计平均每秒Replace语句执行次数。                  | ≥0Executions/s   |
| Replace_Selection语句执行频率 | 该指标用于统计平均每秒Replace_Selection语句执行次数。        | ≥0Executions/s   |
| Select语句执行频率            | 该指标用于统计平均每秒Select语句执行次数。                   | ≥0Executions/s   |
| Update语句执行频率            | 该指标用于统计平均每秒Update语句执行次数。                   | ≥0Executions/s   |
| 行删除速率                    | 该指标用于统计平均每秒从InnoDB表删除的行数。                 | ≥0rows/s         |
| 行插入速率                    | 该指标用于统计平均每秒向InnoDB表插入的行数。                 | ≥0rows/s         |
| 行读取速率                    | 该指标用于统计平均每秒从InnoDB表读取的行数。                 | ≥0rows/s         |
| 行更新速率                    | 该指标用于统计平均每秒向InnoDB表更新的行数。                 | ≥0rows/s         |
| 连接数使用率                  | 该指标用于统计当前已用的MySQL连接数占总连接数的百分比。      | 0~100%           |
| 复制时延                      | 该指标用于展示MySQL主备实例中，备节点的数据复制时延。也用于展示只读实例的数据复制时延。说明：复制时延指标**不显示**在MySQL主备实例的主节点中。如需查看，请至对应备节点的监控指标项中获取该指标信息。对于MySQL只读实例，可直接在只读实例的监控指标项中获取该指标信息。 | ≥0Seconds        |
| 慢日志个数统计                | 该指标展示每分钟MySQL产生慢日志的数量。                      | ≥Counts/Minute   |